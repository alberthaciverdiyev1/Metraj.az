{{>Component.Breadcrumb items=breadcrumbs}}
{{>Component.ScrollTop}}

<main>
    <div class="max-w-6xl mx-auto px-4">
        <section id="agencies">
            <div class="flex flex-col lg:flex-row justify-between gap-4 mb-5">
                <h2 class="text-2xl lg:text-4xl font-bold text-[color:var(--text-color)]">
                    {{t "Agencies"}}
                </h2>

                <div class="flex flex-wrap items-center gap-2">
                    <button id="gridViewBtn"
                        class="view-toggle active px-3 py-2 hover:bg-orange-300 hover:text-white transition rounded-md border border-gray-300">
                        <i class="bi bi-grid-3x3-gap"></i>
                    </button>

                    <button id="listViewBtn"
                        class="view-toggle px-3 py-2 rounded-md border hover:bg-orange-300 hover:text-white transition border-gray-300">
                        <i class="fas fa-list"></i>
                    </button>

                    <div class="relative">
                        <div class="relative inline-block">
                            <select
                                class="appearance-none flex items-center border border-[var(--border-color)] px-4 py-2 rounded-md bg-white pr-8">
                                <option>All</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-2 flex items-center">
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="agencyCards" class=" grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                {{#each agencies}}
                <div onclick="window.location.href='/agency/{{id}}'"
                    class="agencies-card relative hover:cursor-pointer hover:shadow-lg transition duration-300 flex flex-col h-full  {{#if is_premium}} bg-yellow-50 border-2 border-yellow-400 {{else}} bg-white {{/if}}"
                    data-id="{{id}}" data-is-premium="{{is_premium}}">


                    {{#if is_premium}}
                    <div
                        class="absolute top-2 right-2 bg-white text-white text-xs font-bold px-2 py-1 rounded-full z-10">
                        <i class="fa-solid fa-crown text-yellow-500 text-xl hover:text-yellow-400"></i>
                    </div>
                    {{/if}}
                    <figure class="h-32 overflow-hidden">
                        <img class="w-full h-full object-cover" src="{{background_image}}" alt="Agency Background">
                    </figure>

                    <div class="flex ml-5 -mt-8 relative">
                        <img class="w-16 h-16 rounded-full border-2 border-white object-cover" src="{{profile_image}}"
                            alt="{{name}}">
                    </div>

                    <div class="p-4 flex flex-col justify-between flex-1">
                        <div class="flex flex-col flex-1">
                            <h3 class="text-lg font-semibold text-[color:var(--text-color)] truncate">{{name}}</h3>
                            <p class="text-gray-500 text-sm">{{address}}</p>
                            <p class="text-gray-600 text-xs mt-2 line-clamp-3">{{short_description}}</p>

                            <div class="text-sm mt-2 space-y-1">
                                <p><span class="font-semibold">{{t "Offer count"}}:</span> 300</p>
                                <p><span class="font-semibold">Phone:</span> {{phone_2}}</p>
                                <p><span class="font-semibold">Phone:</span> {{phone_3}}</p>
                                <p><span class="font-semibold">Work Hours:</span> 12:00 - 15:00</p>
                            </div>
                        </div>

                        <div class="mt-4 flex justify-between items-center">
                            <div class="flex gap-2 text-gray-500">
                                <i class="bi bi-telephone-fill"></i>
                                <i class="bi bi-envelope-fill"></i>
                                <i class="bi bi-globe2"></i>
                            </div>
                            <div class="flex gap-2">
                                <a href="/agency/{{id}}" onclick="event.stopPropagation()"
                                    class="px-3 py-1 rounded-md border border-[color:var(--primary)] text-[color:var(--primary)] text-xs hover:bg-[color:var(--primary)] hover:text-white transition">
                                    Details
                                </a>

                                {{!-- {{#unless is_premium}}
                                <button
                                    class="premium-btn px-3 py-1 rounded-md bg-orange-400 text-white text-xs hover:bg-[#F1913D] transition">
                                    Premium et
                                </button>
                                {{/unless}} --}}
                            </div>

                        </div>

                    </div>
                </div>
                {{/each}}


            </div>

            <!-- Pagination -->
            <div class="flex justify-center mt-8">
                <nav aria-label="Page navigation">
                    <ul class="pagination mb-0 flex gap-2">
                        <li class="page-item">
                            <a class="page-link px-3 py-1 border rounded-md hover:bg-[color:var(--primary)] hover:text-white transition"
                                href="#" aria-label="Previous">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        </li>
                        <li class="page-item"><a class="page-link px-3 py-1 border rounded-md" href="#">1</a></li>
                        <li class="page-item active"><a
                                class="page-link px-3 py-1 border rounded-md bg-[color:var(--primary)] text-white"
                                href="#">2</a></li>
                        <li class="page-item disabled"><a
                                class="page-link px-3 py-1 border rounded-md text-gray-400 cursor-not-allowed"
                                href="#">...</a></li>
                        <li class="page-item"><a class="page-link px-3 py-1 border rounded-md" href="#">20</a></li>
                        <li class="page-item">
                            <a class="page-link px-3 py-1 border rounded-md hover:bg-[color:var(--primary)] hover:text-white transition"
                                href="#" aria-label="Next">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </section>
    </div>
</main>

<script src="/js/agencies.js"></script>